schema: '2.0'
stages:
  data_ingestion:
    cmd: python youtube_comments_analyzer/data_ingestion.py
    deps:
    - path: youtube_comments_analyzer/data_ingestion.py
      hash: md5
      md5: fd5db5dc44b41dc686383fca82059576
      size: 7731
    params:
      params.yaml:
        data_ingestion.random_state: 42
        data_ingestion.test_size: 0.2
    outs:
    - path: data/raw/raw_data.csv
      hash: md5
      md5: 38ee083169162dbac0cb07c80ac0f04e
      size: 6888934
    - path: data/raw/test.csv
      hash: md5
      md5: 3cb099adc63927c191b6939eca68f572
      size: 1331993
    - path: data/raw/train.csv
      hash: md5
      md5: af2f1a25a56696ee6152728f118fbd22
      size: 5550913
  data_preprocessing:
    cmd: python youtube_comments_analyzer/data_preprocessing.py
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: 3cb099adc63927c191b6939eca68f572
      size: 1331993
    - path: data/raw/train.csv
      hash: md5
      md5: af2f1a25a56696ee6152728f118fbd22
      size: 5550913
    - path: youtube_comments_analyzer/data_preprocessing.py
      hash: md5
      md5: b2d421a1827f52f9c92e369a0aea5129
      size: 5742
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: fb63ca8f3014570609befc9941735a99
      size: 988807
    - path: data/interim/train.csv
      hash: md5
      md5: 0b3e48f1bfd78a0c2bcb061ec7a96b10
      size: 4109248
  feature_engineering:
    cmd: python youtube_comments_analyzer/feature_engineering.py
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: fb63ca8f3014570609befc9941735a99
      size: 988807
    - path: data/interim/train.csv
      hash: md5
      md5: 0b3e48f1bfd78a0c2bcb061ec7a96b10
      size: 4109248
    - path: youtube_comments_analyzer/feature_engineering.py
      hash: md5
      md5: 485e57632bee2aa4f5933c4fddf33871
      size: 9139
    params:
      params.yaml:
        feature_engineering.max_features: 1000
        feature_engineering.ngram_range:
        - 1
        - 2
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 8a44a4b7173b568eee928a4c71e17a49
      size: 14670104
    - path: data/processed/X_train.csv
      hash: md5
      md5: c22a95b412b4ad89e887464c12612f82
      size: 58662851
    - path: data/processed/y_test.csv
      hash: md5
      md5: a0900238247f5057b0da658d87bb04b0
      size: 14675
    - path: data/processed/y_train.csv
      hash: md5
      md5: b86668fcfbff2a08b39d1330695496b4
      size: 58667
    - path: models/vectorizer.pkl
      hash: md5
      md5: b235153b9ef96c59a1fa6fc3e4d8f987
      size: 28413
  model_training:
    cmd: python youtube_comments_analyzer/model_training.py
    deps:
    - path: data/processed/X_train.csv
      hash: md5
      md5: c22a95b412b4ad89e887464c12612f82
      size: 58662851
    - path: data/processed/y_train.csv
      hash: md5
      md5: b86668fcfbff2a08b39d1330695496b4
      size: 58667
    - path: youtube_comments_analyzer/model_training.py
      hash: md5
      md5: 2de35fb999906054dafee9478de60cf5
      size: 4066
    params:
      params.yaml:
        model_training.class_weight: balanced
        model_training.is_unbalance: true
        model_training.learning_rate: 0.06747064968662127
        model_training.max_depth: 30
        model_training.metric: multi_logloss
        model_training.min_child_samples: 10
        model_training.n_estimators: 240
        model_training.n_jobs: -1
        model_training.num_class: 3
        model_training.objective: multiclass
        model_training.random_state: 42
    outs:
    - path: models/model.pkl
      hash: md5
      md5: 925aadce1c4aba0b78af403f156d6ea3
      size: 2624154
  model_evaluation:
    cmd: python youtube_comments_analyzer/model_evaluation.py
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 8a44a4b7173b568eee928a4c71e17a49
      size: 14670104
    - path: data/processed/y_test.csv
      hash: md5
      md5: a0900238247f5057b0da658d87bb04b0
      size: 14675
    - path: models/model.pkl
      hash: md5
      md5: 925aadce1c4aba0b78af403f156d6ea3
      size: 2624154
    - path: models/vectorizer.pkl
      hash: md5
      md5: b235153b9ef96c59a1fa6fc3e4d8f987
      size: 28413
    - path: youtube_comments_analyzer/model_evaluation.py
      hash: md5
      md5: ec4cc9f7ca6b8d9571660c82a9f32748
      size: 8323
    params:
      params.yaml:
        model_training.class_weight: balanced
        model_training.is_unbalance: true
        model_training.learning_rate: 0.06747064968662127
        model_training.max_depth: 30
        model_training.metric: multi_logloss
        model_training.min_child_samples: 10
        model_training.n_estimators: 240
        model_training.n_jobs: -1
        model_training.num_class: 3
        model_training.objective: multiclass
        model_training.random_state: 42
    outs:
    - path: experiment_info.json
      hash: md5
      md5: 37849e823cde6a48b84365322d4e8d1f
      size: 84
    - path: reports/figures/Confusion_matrix_test.png
      hash: md5
      md5: b36c0e773e3e566c96c254cb2306d848
      size: 22373
  model_registration:
    cmd: python youtube_comments_analyzer/model_registration.py
    deps:
    - path: experiment_info.json
      hash: md5
      md5: 37849e823cde6a48b84365322d4e8d1f
      size: 84
    - path: youtube_comments_analyzer/model_registration.py
      hash: md5
      md5: 55591f8116cc1128af872e886d10d7da
      size: 2798
